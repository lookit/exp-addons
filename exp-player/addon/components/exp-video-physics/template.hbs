{{! template-lint-disable invalid-interactive}}
<div class="input-group exp-video-physics row col-md-6 ">

    <div class="row recorder-container video-recorder-hidden">
        <div id="recorder" class="col-xs-12">
        </div>
    </div>

    {{#if showVideoWarning}}
        <audio id="videoWarningAudio" autoplay="autoplay" onended={{action 'finishedWarningAudio'}}>
            <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/webcam_error.mp3" type="audio/mpeg">
            <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/webcam_error.ogg" type="audio/ogg">
        </audio>

        <div id="videoWarningConfig">
            {{#if hasWebCam}}
                <div id="camCheckBox" class={{if hasWebCam 'checkComplete'}}>
                    Looks good!
                </div>
            {{else}}
                <div id="camCheckBox" class={{if hasWebCam 'checkComplete'}}>
                    We're not detecting a webcam yet. <button id="reloadButton" class="btn btn-default" {{action 'reloadRecorder'}}>Retry <i class="fa fa-refresh"></i></button>
                </div>
            {{/if}}

            <ul>
                <li> <b> Don't refresh the page! </b> You'll lose your progress. </li>
                <li> Use the 'Retry' button above instead to try to detect your camera. </li>
                <li> We're sorry if things aren't working smoothly! If you can't get your
                camera to work on Lookit, feel free to let us know at lookit-tech@mit.edu.
                Please include what browser and operating system you're using and the following session ID:
                {{session.id}} </li>
                <li> You can press F1 to end this session and choose a privacy level for your videos. </li>
            </ul>

            <div class="row exp-controls">
                <button id="continueBotton"
                    disabled={{if (not hasWebCam) true false}}
                    class="btn btn-success pull-right
                    {{if (not hasWebCam) 'disabled' ''}}"
                    {{ action 'removeWarning' }} >
                    Continue
                </button>
            </div>
        </div>

    {{else}}

        {{#if playAnnouncementNow}}

            <audio id="announcement-audio"
                   onended={{action 'startIntro'}}
                       autoplay="autoplay"
            >

                {{#if isLast}}
                    {{#each audioSources as |stream|}}
                        <source src="{{stream.src}}" type="{{stream.type}}">
                    {{/each}}
                {{else}}

                    {{#if hasBeenPaused}}
                        <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/return_after_pause.ogg"
                                type="audio/ogg">
                        <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/return_after_pause.mp3"
                                type="audio/mp3">
                    {{else}}
                        {{#each audioSources as |stream|}}
                            <source src="{{stream.src}}" type="{{stream.type}}">
                        {{/each}}
                    {{/if}}
                {{/if}}

            </audio>

        {{/if}}

        {{#if isPaused}}
            <audio id="pause-audio" autoplay="autoplay">
                <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/pause.ogg" type="audio/ogg">
                <source src="https://s3.amazonaws.com/lookitcontents/exp-physics/audio/pause.mp3" type="audio/mp3">
            </audio>

            <p class="pause-instructions"> Study paused </p>
            {{#if updatedIsFullscreen}}
                <p class="pause-instructions"> Press space to resume </p>
                <p class="pause-instructions"> (You'll have a moment to turn around again.) </p>
            {{/if}}
        {{/if}}

        <audio id="exp-music" loop="loop">
            {{#each musicSources as |stream|}}
                <source src="{{stream.src}}" type="{{stream.type}}">
            {{/each}}
        </audio>

        <video id="player-video"
               class="{{if (or playAnnouncementNow isPaused) 'attn'}} {{if doingIntro 'intro'}} {{if doingTest 'test'}}"
               autoplay={{autoplay}}
                   poster="{{poster}}"
               onended={{ action 'stopVideo'}}
                   onplay={{action 'startVideo'}}>
            {{#each videoSources as |stream|}}
                <source src="{{stream.src}}" type="{{stream.type}}">
            {{/each}}
        </video>

        <div class="row col-md-6 exp-video-physics">
            <button class="btn btn-success" style="display:none;" id="fsButton" {{ action 'showFullscreen'}} >
                please return to fullscreen
            </button>
        </div>

    {{/if}}

</div>



{{#unless autoforwardOnEnd}}
    <div class="row exp-controls">
        <button class="btn btn-default pull-right" id="nextButton" {{ action 'next' }}>
            Continue
        </button>
    </div>
{{/unless}}


